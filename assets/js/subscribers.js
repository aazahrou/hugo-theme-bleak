function urlB64ToUint8Array(e){const s=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(s),r=new Uint8Array(i.length);for(var n=0;n<i.length;++n)r[n]=i.charCodeAt(n);return r}window.subscribersApp=window.subscribersApp||{},window.subscribersApp.siteUUID=window.subscribersSiteId,window.subscribersApp.subscribersSubscribeUrl="https://subscribe.subscribers.com/api/v1/subscriptions/subscribe",window.subscribersApp.unsubscribersSubscribeUrl="https://subscribe.subscribers.com/api/v1/subscriptions/unsubscribe",window.subscribersApp.subscribersSyncUrl="https://subscribe.subscribers.com/api/v1/subscriptions/sync",window.subscribersApp.firebaseID="963812740552",window.subscribersApp.appleAPNEndpoint="https://apn.subscribers.com/apn",window.subscribersApp.serviceWorkerPath=window.subscribersServiceWorkerPath||"/firebase-messaging-sw.js",window.subscribersApp.publicVAPIDKey="BMZD6yIrbCTqDSNJ4qD3YuI4pa5p0qDPSIsD7PyLPBQPA2SgTQgprPZZHspwF2A4MrK0xZ9uQjFnVhH5RJUkIMQ",window.subscribersApp.keyValueDatabaseUrl="https://test-c44fe.firebaseio.com/",window.subscribersApp.baseConfigUrl="https://cdn.subscribers.com/config/",window.subscribersApp.subscribersHomePage="https://subscribers.com",window.subscribersApp.styleSheetLocation="https://cdn.subscribers.com/assets/subscribers.css",window.subscribersApp.clickServerSuffix="subscribers.com",window.subscribersApp.trackingUrl="https://hi.subscribers.com",window.subscribersApp.version="3",window.subscribersApp.clickServer=function(){return"https://"+window.subscribersApp.effectiveSiteConfig.subdomain+"."+window.subscribersApp.clickServerSuffix},window.subscribersApp.fetchConfig=function(){var e=window.subscribersApp.baseConfigUrl+window.subscribersSiteId+".json";return window.subscribersApp.ajax(e,"GET").then(function(e){return window.subscribersApp.configuration=e,window.subscribersApp.effectiveSiteConfig=window.subscribersApp.fillSiteConfig(window.subscribersApp.configuration.site),window.subscribersApp.effectiveChickletConfig=window.subscribersApp.fillChickletConfig(window.subscribersApp.configuration.chicklet),window.subscribersApp.effectiveModalConfig=window.subscribersApp.fillModalConfig(window.subscribersApp.configuration.modal),window.subscribersApp.appleWebsitePushID=window.subscribersApp.effectiveSiteConfig.appleWebsitePushId,window.subscribersApp.effectiveSiteConfig})},window.subscribersApp.vendorId=window.safari?"1":"0",window.subscribersApp.service=window.safari?"apple":"firebase",window.subscribersApp.ajax=function(e,s,i){return new Promise(function(r,n){var o=new XMLHttpRequest;o.onload=function(){200==this.status?r(JSON.parse(this.responseText)):n(o.status)},o.onerror=function(){n(o.status)},o.open(s,e,!0),o.setRequestHeader("Content-Type","application/json"),e.includes("subscribersdemo")&&o.setRequestHeader("Authorization","Basic c3RhZ2U6dGVzdA=="),"GET"!==s?o.send(JSON.stringify(i)):o.send()})},window.subscribersApp.getCookie=function(e){for(var s=e+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(s))return n.substring(s.length,n.length)}return null},window.subscribersApp.setCookie=function(e){document.cookie=e+";path=/"},window.subscribersApp.loadScript=function(e){return new Promise(function(s,i){var r=document.createElement("script");r.type="text/javascript",r.onload=s,r.onerror=i,r.src=e,document.getElementsByTagName("body")[0].appendChild(r)})},window.subscribersApp.loadStylesheet=function(e){return new Promise(function(s,i){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.onload=s,r.onerror=i,r.href=e,document.getElementsByTagName("head")[0].appendChild(r)})},window.subscribersApp.isIOS=function(e){return/(iPhone|iPad|iPod)/i.test(e)},window.subscribersApp.calculator=function(e){var s=" readers",i=1,r="",n=e||0;return n>=1e3&&n<1e6?(r="K",i=1e3):n>=1e6&&n<1e9?(r="M",i=1e6):n>=1e9&&n<1e12&&(r="B",i=1e9),s=Math.floor(10*n/i)/10+r+s},window.subscribersApp.browser=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?"Safari":/(msie|trident|edge)/i.test(navigator.userAgent)?"Microsoft":/(chrome|android)/i.test(navigator.userAgent)?"Chrome":/(mozilla|firefox)/i.test(navigator.userAgent)?"Firefox":"unknown"},window.subscribersApp.browserSupported=function(){if(window.subscribersApp.isIOS(navigator.userAgent))return!1;var e=window.subscribersApp.browser();return null!==window.subscribersApp.siteUUID&&("Chrome"==e||"Firefox"==e||"Safari"==e)},window.subscribersApp.setUUID=function(){function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var s=16*Math.random()|0;return("x"==e?s:3&s|8).toString(16)})}return localStorage.subscriberUUID||localStorage.setItem("subscriberUUID",e()),localStorage.subscriberUUID},window.subscribersApp.clientData=function(){var e="safari"in window,s="opera"in window,i="chrome"in window,r="netscape"in window,n="Intl"in window?Intl.DateTimeFormat().resolvedOptions().timeZone:null;return{userAgent:navigator.userAgent,appName:navigator.appName,appVersion:navigator.appVersion,vendor:navigator.vendor,vendorSub:navigator.vendorSub,platform:navigator.platform,language:navigator.language,languages:navigator.languages,opera:s,safari:e,chrome:i,netscape:r,timezoneOffset:(new Date).getTimezoneOffset(),timezone:n}},window.subscribersApp.track=function(e){function s(e){var s=new Image;s.style.display="none",s.src=e}function i(e){var s=new URL(window.subscribersApp.trackingUrl);return s.pathname=e.join("/"),s}var r=window.subscribersApp.vendorId,n=[].slice.call(arguments,1);s(i([e,r,window.subscribersApp.siteUUID,localStorage.subscriberUUID].concat(n)))},window.subscribersApp.trackVisit=function(){window.subscribersApp.track("visit")},window.subscribersApp.trackDenied=function(){window.subscribersApp.track("denied")},window.subscribersApp.trackGranted=function(e){window.subscribersApp.track("granted",e)},window.subscribersApp.trackNotSupported=function(){window.subscribersApp.track("notsupported")},window.subscribersApp.trackError=function(e,s){throw window.subscribersApp.track("error",e+": "+s.toString()),console.error(e,s.toString()),s},window.subscribersApp.trackSubscribed=function(e){window.subscribersApp.track("subscribed",e)},window.subscribersApp.trackUnsubscribed=function(e){window.subscribersApp.track("unsubscribed",e)},window.subscribersApp.defaultConfig={chicklet:{message:"Subscribe",showCount:!0,position:"bottom",accent:"f16334",shade:"dark"},modal:{headline:"Don't miss any article. Subscribe to this blog.",subheadline:"You can turn off your notifications anytime from your browser",includeBranding:!0,ctaButton:"Subscribe",noButton:"Nope",accent:"f16334",icon:"https://placehold.it/200x200"},site:{subdomain:"neilpatel",mode:"modal",showModalAfter:5}},window.subscribersApp.fillChickletConfig=function(e){return e=e||{},e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.chicklet)},window.subscribersApp.fillModalConfig=function(e){return e=e||{},e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.modal)},window.subscribersApp.fillSiteConfig=function(e){return e=e||{},(e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.site)).mode=window.subscribersApp.effectiveMode(e),e},window.subscribersApp.configFromDefaults=function(e,s){for(var i in s)s.hasOwnProperty(i)&&(e[i]!==undefined&&null!==e[i]||(e[i]=s[i]));return e},window.subscribersApp.effectiveMode=function(e){return"nativeImmediate"!=e.mode||window.subscribersApp.onHttps()?e.mode:(console.log("nativeImmediate on http. Disabling"),"disabled")},window.subscribersApp.onHttps=function(){return"localhost"===location.hostname||"https:"===document.location.protocol},window.subscribersApp.classNamespace="subscribers",window.subscribersApp.createContainer=function(e){var s=document.createElement("DIV"),i=e.split(" ").map(window.subscribersApp.toClass);return i.push(window.subscribersApp.classNamespace),s.className=i.join(" "),s},window.subscribersApp.toClass=function(e){return window.subscribersApp.classNamespace+"-"+e.trim()},window.subscribersApp.addClass=function(e,s){var i=e.className;return i=(i+" "+window.subscribersApp.toClass(s)).trim(),e.className=i,e},window.subscribersApp.removeClass=function(e,s){var i=e.className.replace(window.subscribersApp.toClass(s),"").trim();return e.className=i,e},window.subscribersApp.loadChickletStyles=function(){return window.subscribersApp.loadStylesheet(window.subscribersApp.styleSheetLocation)},window.subscribersApp.buildChicklet=function(e,s){var i,r=e.showCount;i='<h5 class="chicklet-action">%%MESSAGE%%</h5>',r&&(i+='<h6 class="chicklet-subscribers-count">%%COUNT%%</h6>');var n=window.subscribersApp.createContainer("chicklet");i=i.replace("%%MESSAGE%%",e.message),r&&(window.subscribersApp.addClass(n,"has-count"),i=i.replace("%%COUNT%%",s)),n.innerHTML=i,n.style.backgroundColor="#"+e.accent,n.style.color="light"===e.shade?"#333333":"#ffffff";for(var o=e.position.split(" "),t=0;t<o.length;t++)window.subscribersApp.addClass(n,"position-"+o[t]);return n},window.subscribersApp.buildSubscribeModalOnly=function(e,s){var i='<div class="subscribers-headline">                <div class="modal-image-wrapper">                  <img class="modal-image" src="%%ICON%%">                </div>                <div class="modal-text">                  <h3 class="modal-headline">%%HEADLINE%%</h3>                  <hr class="modal-hr" style="border-color: %%ACCENTCOLOR%%">                  <h4 class="modal-subheadline">%%SUBHEADLINE%%</h4>                </div>              </div>              <div class="subscribers-actions">                %%BRANDINGHTML%%                <span class="action-buttons">                  <button class="primary-action '+window.subscribersApp.classNamespace+'-cta-button" style="background-color: %%ACCENTCOLOR%%; color: white;" >%%CTABUTTON%%</button>                  <button class="secondary-action '+window.subscribersApp.classNamespace+'-no-button">%%NOBUTTON%%</button>                </span>              </div>',r='<h5 class="branding">Powered by <strong class="brand-link"><a href="%%SUBSCRIBERSHOMEPAGE%%" target="_blank" style="color: %%ACCENTCOLOR%%">subscribers</a></strong></h5>'.replace("%%SUBSCRIBERSHOMEPAGE%%",s);i=(i=(i=(i=(i=(i=(i=e.includeBranding?i.replace("%%BRANDINGHTML%%",r):i.replace("%%BRANDINGHTML%%","")).replace("%%HEADLINE%%",e.headline)).replace("%%SUBHEADLINE%%",e.subheadline)).replace("%%ICON%%",e.icon)).replace("%%CTABUTTON%%",e.ctaButton)).replace("%%NOBUTTON%%",e.noButton)).replace(/%%ACCENTCOLOR%%/g,"#"+e.accent);var n=window.subscribersApp.createContainer("modal");return n.innerHTML=i,n},window.subscribersApp.buildSubscribeModal=function(e,s){var i=window.subscribersApp.buildSubscribeModalOnly(e,s),r=window.subscribersApp.createContainer("modal-container"),n=window.subscribersApp.createContainer("modal-overlay");return r.appendChild(n),r.appendChild(i),window.subscribersApp.addClass(r,"not-displayed"),window.subscribersApp.addClass(r,"hide-animate"),{container:r,modal:i,overlay:n}},window.subscribersApp.runInModalMode=function(e){function s(e,s){DOMObjects.chicklet=window.subscribersApp.buildChicklet(e,s),document.body.appendChild(DOMObjects.chicklet),DOMObjects.chicklet.addEventListener("click",f)}function i(){DOMObjects.chicklet&&(DOMObjects.chicklet.style.display="none")}function r(){var e=window.subscribersApp.effectiveChickletConfig;e.showCount?o().then(function(i){var r=window.subscribersApp.calculator(i);s(e,r)}):s(e,null);var i=window.subscribersApp.effectiveModalConfig;DOMObjects.modal=window.subscribersApp.buildSubscribeModal(i,window.subscribersApp.subscribersHomePage),document.body.appendChild(DOMObjects.modal.container),DOMObjects.modal.ctaButton=DOMObjects.modal.modal.getElementsByClassName("subscribers-cta-button")[0],DOMObjects.modal.noButton=DOMObjects.modal.modal.getElementsByClassName("subscribers-no-button")[0],DOMObjects.modal.overlay.addEventListener("click",A),DOMObjects.modal.ctaButton.addEventListener("click",h),DOMObjects.modal.noButton.addEventListener("click",m)}function n(e){-1!=e&&setTimeout(c,1e3*e)}function o(){var e=window.subscribersApp.keyValueDatabaseUrl+"sites/"+siteUUID()+".json";return window.subscribersApp.ajax(e,"GET")}function t(){DOMObjects.modal&&(window.subscribersApp.addClass(DOMObjects.modal.container,"hide-animate"),setTimeout(function(){window.subscribersApp.addClass(DOMObjects.modal.container,"not-displayed")},1100))}function c(e){(e||!window.subscribersApp.modalHasBeenOpened&&!w())&&(window.subscribersApp.removeClass(DOMObjects.modal.container,"not-displayed"),window.subscribersApp.removeClass(DOMObjects.modal.container,"hide-animate"),DOMObjects.modal.container.style.display="",window.subscribersApp.modalHasBeenOpened=!0)}function b(){if(!l()){var e=800,s=700,i=screen.width/2-e/2,r=screen.height/2-s/2;return window.open(window.subscribersApp.clickServer(),"subscribers.com","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+s+", top="+r+", left="+i)}}function a(){var e=p(7);window.subscribersApp.setCookie("isPushNotificationClient=false;expires="+e)}function u(){b(),t()}function p(e){var s=new Date,i=new Date(s);return i.setDate(s.getDate()+e),i.toUTCString()}function d(){var e=p(3650);window.subscribersApp.setCookie("subscribers-app-subscribed=true;expires="+e),i()}function w(){return"false"===window.subscribersApp.getCookie("isPushNotificationClient")}function l(){return"true"===window.subscribersApp.getCookie("subscribers-app-subscribed")}function f(){c(!0)}function A(){a(),t()}function h(){u()}function m(){a(),t()}window.subscribersApp.modalHasBeenOpened=!1,window.addEventListener("message",function(e){"subscribers-app-subscribed"===e.data&&d()},!1),window.subscribersApp.loadChickletStyles().then(function(){r(),n(e.showModalAfter)})},window.subscribersApp.postToken=function(e){return window.subscribersApp.ajax(window.subscribersApp.subscribersSubscribeUrl,"POST",{service:e.service,token:e.token,uuid:window.subscribersApp.siteUUID||window.subscribersSiteId,vendor:e.vendor,metaData:window.subscribersApp.clientData(),subscriber_uuid:localStorage.subscriberUUID})},window.subscribersApp.deleteToken=function(e){return window.subscribersApp.ajax(window.subscribersApp.unsubscribersSubscribeUrl,"POST",{service:e.service,token:e.token,uuid:window.subscribersApp.siteUUID||window.subscribersSiteId,vendor:e.vendor,subscriber_uuid:localStorage.subscriberUUID})},window.subscribersApp.sendSubscriptionToServer=function(e,s){return window.subscribersApp.ajax(window.subscribersApp.subscribersSyncUrl,"POST",{token:e,uuid:window.subscribersApp.siteUUID||window.subscribersSiteId,vendor:window.subscribersApp.vendorId,subscriber_uuid:localStorage.subscriberUUID,subscription_json:s})},window.subscribersApp.loadFirebase=function(){function e(){return window.subscribersApp.loadScript(r+"/firebase-app.js")}function s(){return window.subscribersApp.loadScript(r+"/firebase-messaging.js")}function i(){firebase.initializeApp({messagingSenderId:window.subscribersApp.firebaseID});var e=firebase.messaging();return e.usePublicVapidKey(window.subscribersApp.publicVAPIDKey),e}var r="https://www.gstatic.com/firebasejs/"+"5.7";return e().then(s).then(i)["catch"](function(e){throw console.log(e),e})},window.subscribersApp.requestFirebasePermission=function(){return new Promise(function(e,s){window.subscribersApp.loadFirebase().then(function(i){firebase.messaging.isSupported()||s("Not supported"),i.onTokenRefresh(function(){i.getToken().then(function(e){console.log("Token refreshed."),window.subscribersApp.postToken({service:window.subscribersApp.service,vendor:window.subscribersApp.vendorId,token:e}).then(function(){window.subscribersApp.trackRefreshed(e),window.subscribersApp.syncAuthKeys(e),localStorage.setItem("firebaseToken",e)})})["catch"](function(e){console.log("Unable to retrieve refreshed token ",e),window.subscribersApp.trackError("Unable to retrieve refreshed token")})}),navigator.serviceWorker.register(window.subscribersApp.serviceWorkerPath).then(function(e){i.useServiceWorker(e)}).then(function(){return i.requestPermission()}).then(function(){return i.getToken()}).then(function(i){i&&""!==i?e(i):s("Token is null")})["catch"](function(e){s(Error("There was an error with Firebase: "+e))})})["catch"](function(e){s(Error("There was an error loading Firebase: "+e))})})},window.subscribersApp.requestSafariPermission=function(){return new Promise(function(e,s){function i(i){"default"===i.permission?s("User didn't choose anything"):"denied"===i.permission?s("denied"):"granted"===i.permission&&e(i.deviceToken)}window.safari.pushNotification.requestPermission(window.subscribersApp.appleAPNEndpoint,window.subscribersApp.appleWebsitePushID,{siteUUID:window.subscribersApp.siteUUID},i)})},window.subscribersApp.getNotificationPermission=function(){return window.safari?window.safari.pushNotification.permission(window.subscribersApp.appleWebsitePushID).permission:Notification.permission},window.subscribersApp.syncAuthKeys=function(e){navigator.serviceWorker.ready.then(function(s){s.pushManager.getSubscription().then(function(s){s?localStorage.firebaseEndpoint!==s.endpoint&&window.subscribersApp.sendSubscriptionToServer(e,s.toJSON()).then(function(){localStorage.setItem("firebaseEndpoint",s.endpoint)}):console.log("Subscription could not be found")})})},window.subscribersApp.subscribe=function(){function e(e,s){return function(i){return window.subscribersApp.trackGranted(i),i===localStorage.firebaseToken?(window.subscribersApp.syncAuthKeys(i),s(i)):window.subscribersApp.postToken({service:e,vendor:window.subscribersApp.vendorId,token:i}).then(function(){window.subscribersApp.trackSubscribed(i),window.subscribersApp.syncAuthKeys(i),localStorage.setItem("firebaseToken",i),s(i)})}}function s(e,s){return function(i){var r="Error during subscription in "+("firebase"===e?"Firebase":"Safari");window.subscribersApp.trackError(r,i),s(r)}}function i(i,r){window.subscribersApp.requestSafariPermission().then(e("apple",i))["catch"](s("apple",r))}function r(i,r){window.subscribersApp.requestFirebasePermission().then(e("firebase",i))["catch"](s("firebase",r))}function n(e,s){return window.safari&&""!=window.subscribersApp.appleWebsitePushID?i(e,s):"Notification"in window&&!window.safari?r(e,s):void window.subscribersApp.trackNotSupported()}return new Promise(function(e,s){"denied"===window.subscribersApp.getNotificationPermission()?(window.subscribersApp.trackDenied(),window.subscribersApp.unsubscribe(),s("Notification permission is denied.")):n(e,s)})},window.subscribersApp.unsubscribe=function(){return new Promise(function(e,s){if(!localStorage.firebaseToken)return s();window.subscribersApp.loadFirebase().then(function(s){var i=localStorage.firebaseToken;window.subscribersApp.deleteToken({service:window.subscribersApp.service,vendor:window.subscribersApp.vendorId,token:i}).then(function(){window.subscribersApp.trackUnsubscribed(localStorage.firebaseToken),s.deleteToken(localStorage.firebaseToken),localStorage.removeItem("firebaseToken"),e(i)})})})},window.subscribersApp.runInNativeMode=function(e){function s(){window.subscribersApp.subscribe().then(()=>{console.log("successfully subscribed")})["catch"](e=>{console.error("error subscribing",e)})}function i(e){-1!=e&&setTimeout(s,1e3*e)}i(e.showModalAfter)},window.DOMObjects={},document.addEventListener("DOMContentLoaded",function(){function e(e){window.subscribersApp.runInNativeMode(e)}function s(e){window.subscribersApp.runInModalMode(e)}window.subscribersApp.browserSupported()&&(window.subscribersApp.setUUID(),window.subscribersApp.trackVisit(),window.subscribersApp.fetchConfig().then(function(i){switch(i.mode){case"modal":s(i);break;case"nativeImmediate":e(i)}})["catch"](function(){console.log("Failed to fetch config")}))}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){"pushsubscriptionchange"===e.data.event&&window.subscribersApp.unsubscribe().then(window.subscribersApp.subscribe).then(function(e){console.log("Token from Client: ",e)})});